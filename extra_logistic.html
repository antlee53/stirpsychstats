<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>HPSP131 - Logistic Regression</title>

<script src="site_libs/header-attrs-2.26/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">HPSP131</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="1intro.html">1. Intro</a>
</li>
<li>
  <a href="2data.html">2. Data 1</a>
</li>
<li>
  <a href="7GLM.html">3. Data 2</a>
</li>
<li>
  <a href="3plot.html">4. Plot</a>
</li>
<li>
  <a href="4LM1.html">5. ttest_ANOVA</a>
</li>
<li>
  <a href="5LM2.html">6. Cor_Reg</a>
</li>
<li>
  <a href="6mod.html">7. Mod</a>
</li>
<li>
  <a href="8sim22.html">8. Pwr_Med</a>
</li>
<li>
  <a href="9SEM.html">9. SEM</a>
</li>
<li>
  <a href="10mixed.html">10. Mixed</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extra
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="extra_lists.html">Lists, Matrices, and Indexing</a>
    </li>
    <li>
      <a href="extra_joins.html">Joining data.frames</a>
    </li>
    <li>
      <a href="extra_cleaning.html">Cleaning and Data Preparation</a>
    </li>
    <li>
      <a href="extra_chisquare.html">Chi-square Tests</a>
    </li>
    <li>
      <a href="extra_nonparametric.html">Non-parametric Tests</a>
    </li>
    <li>
      <a href="extra_logistic.html">Logistic Regression</a>
    </li>
    <li>
      <a href="extra_functions.html">Custom Functions</a>
    </li>
    <li>
      <a href="extra_simulation.html">Simulations</a>
    </li>
  </ul>
</li>
<li>
  <a href="exercises.html">Exercises</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">HPSP131 - Logistic Regression</h1>

</div>


<p>This page contains extra R content not covered in the demonstrations
and could be considered supplementary to the module. This content is
useful for completing the advanced exercises from Week 6 and focuses on
conducting logistic regression in R. Logistic regression is typically
used when the DV is categorical with one or more continuous IV.</p>
<div id="logistic-regression" class="section level1">
<h1>Logistic Regression</h1>
<p>A logistic regression is used when you have a categorical DV and a
continuous IV. The most simple scenario is when the DV is binary (i.e.,
only has two categories). The two categories of the DV coded as
<code>0</code> and <code>1</code>.</p>
<p>To conduct a logistic regression in R, you can use the
<code>glm()</code> function. In this instance, ‘glm’ stands for
Generalised Linear Model, and can be used for many different types of
analysis. Like most analysis functions, the <code>glm()</code> function
accepts a formula and a data.frame. We also need to tell the function
which type of analysis to conduct. This is done via the
<code>family</code> argument. To conduct a binomial logistic regression,
we set this argument to “binomial”. Much like with the <code>lm()</code>
function, to view the results in an interpretable way you must use the
<code>summary()</code> function.</p>
<p>Altogether, this becomes:</p>
<pre class="r"><code>#The DV must be a categorical variable with two levels.
model &lt;- glm(DV ~ IV,data = data,family = &quot;binomial&quot;)
summary(model)</code></pre>
<div id="prepare-data-for-analysis" class="section level3">
<h3>1. Prepare Data for Analysis</h3>
<p>Let’s look an example using the class data. Let’s say that you
predict that people who are more introverted are more likely to play
videogames than not. A logistic regression is appropriate because you
have a continuous IV (introversion score) and a categorical DV
(videogamer vs. non-videogamer). Importantly, the two groups for the
outcome variable must be coded as <code>0</code> and <code>1</code>. We
can use the <code>ifelse()</code> function inside a
<code>mutate()</code> function to achieve this. You can also do this by
changing the variable class to a factor.</p>
<p>First, let’s prepare the data by calculating the necessary scores. We
have also loaded the necessary packages, being
<code>tidyverse</code>.</p>
<pre class="r"><code>library(tidyverse)

analysis.data &lt;- data %&gt;%
  mutate( introvert = introversion2 + introversion5 + introversion7 + introversion8 + introversion10,
          video.games = ifelse(video.games == &quot;Yes&quot;,1,0)) %&gt;%
  select(introvert,video.games)</code></pre>
</div>
<div id="conduct-the-statistical-test" class="section level3">
<h3>2. Conduct the Statistical Test</h3>
<p>Following the example above, we can use the <code>glm()</code>
function to conduct the logistic regression.</p>
<pre class="r"><code>model &lt;- glm(video.games ~ introvert,data = analysis.data,family = &quot;binomial&quot;)

summary(model)</code></pre>
<pre><code>## 
## Call:
## glm(formula = video.games ~ introvert, family = &quot;binomial&quot;, data = analysis.data)
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept) -0.90482    0.89630   -1.01    0.313
## introvert    0.03462    0.05672    0.61    0.542
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 162.30  on 119  degrees of freedom
## Residual deviance: 161.93  on 118  degrees of freedom
## AIC: 165.93
## 
## Number of Fisher Scoring iterations: 4</code></pre>
</div>
<div id="write-up-the-results" class="section level3">
<h3>3. Write-up the Results</h3>
<p>Much like with a standard regression, you get statistics about
overall model performance, as well as statistics for each individual
predictor. Similarly, you are expected to report both for a logistic
regression. For the statistics for each predictor, however, there is not
one standard way to report a logistic regression. Some people choose to
report the unstandardised coefficients, z-statistic, and associated
p-values as given in the <code>summary()</code> function. Others choose
to convert these to odds-ratios and report 95% confidence intervals. You
can use the following code if you want to convert the coefficients to
odds-ratios.</p>
<pre class="r"><code>exp(cbind(OR = coef(model), confint(model)))</code></pre>
<pre><code>##                    OR      2.5 %   97.5 %
## (Intercept) 0.4046137 0.06734982 2.314671
## introvert   1.0352217 0.92637143 1.158811</code></pre>
</div>
<div id="visualise-the-data" class="section level3">
<h3>4. Visualise the Data</h3>
<p>To visualise a logistic regression, we can plot the probabilities. To
do this, we can use the <code>geom_jitter()</code> and
<code>geom_smooth()</code> functions, similar to with a standard
regression.</p>
<p>How to read the graph below is the line represents the probability of
being in one of the two groups (0 = non-videogamers, 1 = videogamers)
for each level of the variable on the x-axis (introversion). If there is
a strong relationship, then the logistic regression line should have a
very characteristic “S” shape. If there is no relationship, the logistic
regression line will look quite straight. Note that since participants
can only be in one of two groups, all the points will either be at the
top, or bottom of the y-axis.</p>
<p>There are a few things to note: 1), I have adjusted the
<code>height</code>, <code>width</code> and <code>alpha</code>
aesthetics in the <code>geom_jitter()</code> function so it makes it a
bit easier to see all the individual points; and 2) we need to adjust
the <code>method</code> and <code>method.arg</code> arguments in the
<code>geom_smooth()</code> function to create a logistic regression
line.</p>
<pre class="r"><code>ggplot(analysis.data,aes(x = introvert,y = video.games)) +
  geom_jitter(height = .05,width = 0,alpha = .3) +
  geom_smooth(method = &quot;glm&quot;,method.args = list(family = &quot;binomial&quot;),se = FALSE) +
  theme_classic()</code></pre>
<p><img src="extra_logistic_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
<div id="advanced-exercises" class="section level1">
<h1>Advanced Exercises</h1>
<p>If you would like to practice the skills on this page, weekly
exercise questions on this content are available in the advanced
exercises for Week 6. You can download the interactive exercises by
clicking the link below.</p>
<p><a href = "exercises.html">Click here to download this week’s
exercises.</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
