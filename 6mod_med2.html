<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>HPSP131 - Workbook 7 - Moderation (Interaction Effects), Two-Way ANOVA, and Mixed-Designs ANOVA</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">HPSP131</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="1intro.html">1. Intro</a>
</li>
<li>
  <a href="2data.html">2. Data 1</a>
</li>
<li>
  <a href="7GLM.html">3. Data 2</a>
</li>
<li>
  <a href="3plot.html">4. Plot</a>
</li>
<li>
  <a href="4LM1.html">5. LM1</a>
</li>
<li>
  <a href="5LM2.html">6. LM2</a>
</li>
<li>
  <a href="6mod_med2.html">7. Mod</a>
</li>
<li>
  <a href="8sim.html">8. Power</a>
</li>
<li>
  <a href="9SEM.html">9. SEM</a>
</li>
<li>
  <a href="10mixed.html">10. Mixed</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="exercises.html">Exercises</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">HPSP131 - Workbook 7 - Moderation (Interaction Effects), Two-Way ANOVA, and Mixed-Designs ANOVA</h1>

</div>


<div id="objectives" class="section level1">
<h1>Objectives</h1>
<p>The aim of this week’s workbook is to cover moderation (interaction effects) and mediation analyses in R. By the end of this workbook, you should be able to:</p>
<ol style="list-style-type: decimal">
<li>Perform a multiple regression with interaction effects.</li>
<li>Plot relationship between data with two continuous IVs and one continuous DV, including:</li>
</ol>
<ul>
<li>interaction plots</li>
</ul>
<ol style="list-style-type: decimal">
<li>Perform a two-way ANOVA</li>
<li>Perform a mixed-designs ANOVA</li>
</ol>
</div>
<div id="class-data" class="section level1">
<h1>Class data</h1>
<p><a href = files/simulated.data_2020.csv download>Click here to download the data used in these workbooks.</a> (You may need to right-click and select ‘Save Linked File’ option)</p>
</div>
<div id="exercises" class="section level1">
<h1>Exercises</h1>
<p><a href = "exercises.html">Click here to download this week’s exercises.</a></p>
</div>
<div id="content" class="section level1">
<h1>Content</h1>
<div id="before-we-begin" class="section level2">
<h2>Before we begin…</h2>
<p>Remember, whenever we analyse data, we will roughly be following this procedure:</p>
<ol style="list-style-type: decimal">
<li>Clean the data for analysis.</li>
<li>Run the statistical test.</li>
<li>Plot the data.</li>
<li>Write-up analysis.</li>
</ol>
<p>We will be using the following packages. If this is your first time using these packages, remember to install them before loading the packages.</p>
<pre class="r"><code>library(tidyverse)
library(lm.beta)</code></pre>
</div>
<div id="reminder-moderation-interaction-effects" class="section level2">
<h2>Reminder: Moderation (Interaction Effects)</h2>
<p>As covered in the Lecture series, moderation is when the effect of an IV (predictor) on the DV (outcome) depends on another IV (predictor). We can test for an interaction effect in a linear regression.</p>
<p>In the example below, we will extend the regression we conducted last week and test the hypothesis that the association between sleep quality and stress is moderated by social support (for instance, the relationship between sleep quality and stress is more negative for participants low in social support).</p>
</div>
<div id="regression-with-interaction-effect" class="section level2">
<h2>Regression with Interaction Effect</h2>
<div id="clean-the-data-for-analysis." class="section level3">
<h3>1. Clean the data for analysis.</h3>
<p>First we must calculate the scores for each scale in the analysis from the individual items. As we have done previously, we can do this by using the <code>mutate()</code> function. The code below is the same as the code we used last week.</p>
<pre class="r"><code>data1.vars  &lt;- data %&gt;%
  mutate(stress = stress.1 + stress.2 + stress.3 + stress.4 + stress.5,
         support = support.1 + support.2 + support.3 + support.4 + support.5,
         sleep.quality = sleep1 + sleep2 + sleep3 + sleep4 + sleep5) %&gt;%
  dplyr::select(student.no,stress,support,sleep.quality)</code></pre>
<p>When including interaction terms in a linear regression, including uncentered variables can be problematic. In order to center the variables, we can use the <code>scale()</code> function. The <code>scale()</code> function expects a numeric vector. There are two additional arguments called <code>center</code> and <code>scale</code>. If <code>center</code> is set to <code>TRUE</code>, but <code>scale</code> is set to <code>FALSE</code>, the <code>scale()</code> function will output the ‘centred’ variable. If both arguments are set to <code>TRUE</code>, the <code>scale()</code> function will return a ‘standardised’ argument.</p>
<p>Because of a quirk with the <code>scale()</code> function, we also need to tell R that the output is a vector. We can do this by wrapping the results from the <code>scale()</code> function inside a <code>c()</code> function.</p>
<p>You can see the <code>scale()</code> function in action below:</p>
<pre class="r"><code>v &lt;- c(3,32,5,6,12,59,96)

#Get the centered variable.

c.v  &lt;- c(scale(v,center = TRUE,scale = FALSE))

c.v</code></pre>
<pre><code>## [1] -27.428571   1.571429 -25.428571 -24.428571 -18.428571  28.571429
## [7]  65.571429</code></pre>
<pre class="r"><code>#Get the standardised variable.

z.v &lt;- scale(v, center = TRUE,scale = TRUE) %&gt;% as.vector()

z.v</code></pre>
<pre><code>## [1] -0.7782022  0.0445845 -0.7214583 -0.6930863 -0.5228546  0.8106273
## [7]  1.8603896</code></pre>
<p>We can use this combination of the <code>scale()</code> and <code>c()</code> functions within the <code>mutate()</code> to calculate the standardised/centred variables of columns in our data.frame:</p>
<pre class="r"><code>#Compute centred variables for analysis.
data1.clean &lt;- mutate(data1.vars,
         c.stress = c(scale(stress,center = TRUE,scale = FALSE)),
         c.support = c(scale(support,center = TRUE,scale = FALSE))) %&gt;%

#Compute standardised variables.
  mutate(z.sleep.quality = c(scale(sleep.quality,center = TRUE,scale = TRUE)),
         z.support = c(scale(support,center = TRUE,scale = TRUE)),
         z.stress = c(scale(stress,center = TRUE,scale = TRUE)))</code></pre>
</div>
<div id="run-statistical-test" class="section level3">
<h3>2. Run statistical test</h3>
<p>Recall that interaction effects are the multiplication of the two variable. Therefore, to specify an interaction, we change the formula we specify to include the multiplication of the variable whose interaction we are interested in. For the unstandardised model, make sure you include the centred variables in the formula.</p>
<pre class="r"><code>#Unstandardised Model
model1 &lt;- lm(sleep.quality ~ c.stress*c.support,data = data1.clean)
summary(model1)</code></pre>
<pre><code>## 
## Call:
## lm(formula = sleep.quality ~ c.stress * c.support, data = data1.clean)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.9410 -1.8632 -0.1277  2.2191  6.3794 
## 
## Coefficients:
##                     Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)        14.811938   0.392308  37.756   &lt;2e-16 ***
## c.stress           -0.188055   0.119188  -1.578    0.120    
## c.support           0.036933   0.096790   0.382    0.704    
## c.stress:c.support -0.008153   0.029197  -0.279    0.781    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.036 on 56 degrees of freedom
## Multiple R-squared:  0.04589,    Adjusted R-squared:  -0.005224 
## F-statistic: 0.8978 on 3 and 56 DF,  p-value: 0.4481</code></pre>
<p>Notice how R automatically includes the main effects in the model? In most cases, you will want to include the separate main effects when including an interaction term, but in the odd occassion when you want to include the interaction effect without the main effect, you can specify it using the <code>:</code> symbol. In other words:</p>
<p><code>stress ~ stars.test*support</code> is identical to <code>stress ~ stars.test + support + stars.test:support</code></p>
<p>Above are the unstandardised coefficients. However, in order to report in APA format, we require the standardised coefficient. Similar to with an ordinary regression, we can use the <code>lm.beta()</code> function to get the standardised coefficients, like here:</p>
<pre class="r"><code>#Standardised Model
model1 %&gt;%
  lm.beta() %&gt;%
  summary()</code></pre>
<pre><code>## 
## Call:
## lm(formula = sleep.quality ~ c.stress * c.support, data = data1.clean)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.9410 -1.8632 -0.1277  2.2191  6.3794 
## 
## Coefficients:
##                     Estimate Standardized Std. Error t value Pr(&gt;|t|)    
## (Intercept)        14.811938     0.000000   0.392308  37.756   &lt;2e-16 ***
## c.stress           -0.188055    -0.207462   0.119188  -1.578    0.120    
## c.support           0.036933     0.049882   0.096790   0.382    0.704    
## c.stress:c.support -0.008153    -0.036708   0.029197  -0.279    0.781    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.036 on 56 degrees of freedom
## Multiple R-squared:  0.04589,    Adjusted R-squared:  -0.005224 
## F-statistic: 0.8978 on 3 and 56 DF,  p-value: 0.4481</code></pre>
</div>
<div id="plot-data" class="section level3">
<h3>3. Plot data</h3>
<p>Interactions can often be difficult to intuit from just looking at the numbers in the model. Therefore, it is almost always necessary to plot them. The most common way to plot an interaction is to split the dataset in two according to the moderator: one with participants who score above the mean on the moderator, and the other with participants who score below the mean on the moderator. In our example, this means splitting the data into participants who are above and below the mean in social support. We can do this by creating a new variable using the <code>ifelse()</code> function within the <code>mutate()</code> function.</p>
<p>The <code>ifelse()</code> function works by first specify a condition as the first argument. The second argument is what happens if data from a participant meets that condition. The third arguement is what happens if a participant does not meet that condition. So in the code below, we are creating a new variable called ‘cat.support’. We want to categorise support into two levels, so the condition in the <code>ifelse()</code> function is <code>z.support &gt; 0</code>. Since we standardised the moderator during the cleaning scale. The mean for support equals 0, so we can split the data on this. Participants who meet this condition are in the “high support” group, while those that are not are in the “low support” group.</p>
<pre class="r"><code>plot.data &lt;- mutate(data1.clean,cat.support = ifelse(z.support &gt; 0,&quot;high support&quot;,&quot;low support&quot;)) %&gt;%
  filter(!is.na(cat.support))</code></pre>
<p>We then can plot the regression line adding in a ‘group’ and ‘colour’ aesthetic to separate our data of participants with high and low support.</p>
<pre class="r"><code>ggplot(plot.data,mapping = aes(x = stress,y = sleep.quality,group = cat.support,colour = cat.support)) +
  geom_smooth(method = &quot;lm&quot;) +
  theme_classic()</code></pre>
<p><img src="6mod_med2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>Even better is if can visualise the raw data in a scatterplot:</p>
<pre class="r"><code>ggplot(plot.data,mapping = aes(x = stress,y = sleep.quality,group = cat.support,colour = cat.support)) +
  geom_smooth(method = &quot;lm&quot;) +
  geom_point() +
  theme_classic()</code></pre>
<p><img src="6mod_med2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="write-up-analysis." class="section level3">
<h3>4. Write-up analysis.</h3>
<p>Given that a moderation is exactly the same as a regression, we require the same information to do the write-up. As a reminder, here are the components you need to write up a regression:</p>
<p>For the model, you need the following information:</p>
<ul>
<li>the R-squared statistic.</li>
<li>the F-statistic and associated degrees of freedom.</li>
<li>the p-value for the model.</li>
</ul>
<p>For each predictor, you need the following information:</p>
<ul>
<li>the standardised coefficient.</li>
<li>the t-statistic.</li>
<li>the p-value for that coefficient.</li>
</ul>
<p>As mentioned last week, with more than one predictor in the model, it may make more sense to report the statistics in a table. This includes models with interaction effects (in the case above, the interaction effect is our third predictor).</p>
<p>Here is an example of the write-up:</p>
<blockquote>
<p>We used a linear regression to predict sleep quality from the level of perceived stress, level of social support, and the interaction between the two. We found that model explained 4.59% of the variance (F(3,56) = 0.9, p = 0.448). Regression coefficients are reported in Table 1. There was a significant, negative main effect of stress on sleep quality. There was no significant main effect of social support on sleep quality. The interaction between perceived stress and social support was significant, such that… [go on to describe the pattern of results]</p>
</blockquote>
<p>Table 1. Regression coefficients for linear model predicting stress.</p>
<table>
<thead>
<tr class="header">
<th>predictor</th>
<th>beta</th>
<th>t</th>
<th>p-value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Perceived Stress</td>
<td>-0.21</td>
<td>-1.58</td>
<td>0.12</td>
</tr>
<tr class="even">
<td>Social Support</td>
<td>0.05</td>
<td>0.38</td>
<td>0.704</td>
</tr>
<tr class="odd">
<td>PS * SS</td>
<td>-0.04</td>
<td>-0.28</td>
<td>0.781</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="two-way-anova" class="section level2">
<h2>Two-Way ANOVA</h2>
<p>A two-way ANOVA is used when you want to evaluate the effects of two categorical IVs on a continuous DV. Much of what we have covered regarding a linear regression with multiple predictors applies with a two-way ANOVA, but with two categorical IVs. In the example below, we will test whether there is an association between between sleep quality and playing video games, and whether this association differs depending on whether you are a cat person or dog person.</p>
<div id="clean-the-data-for-analysis.-1" class="section level3">
<h3>1. Clean the data for analysis.</h3>
<pre class="r"><code>clean.data2 &lt;- data %&gt;%
  filter(cat.dog != &quot;both&quot;) %&gt;%
  filter(cat.dog != &quot;neither&quot;) %&gt;%
  filter(cat.dog != &quot;&quot;) %&gt;%
  mutate(sleep.quality = sleep1 + sleep2 + sleep3 + sleep4 + sleep5) %&gt;%
  select(sleep.quality,video.games,cat.dog)</code></pre>
</div>
<div id="run-statistical-test-1" class="section level3">
<h3>2. Run statistical test</h3>
<p>The function to run a two-way ANOVA is the same as a one-way ANOVA: <code>aov()</code>. R is smart enough to determine which statistical test to run based on how many IVs are in the formula. The formula works the same as an interaction in a regression, where both categorical IVs are “multiplied” together. R will automatically include the main effects for each IV and the interaction. Also, similar to the one-way ANOVA, in order to get output that is interpretable, you can pipe the result to the <code>summary()</code> function.</p>
<pre class="r"><code>aov(sleep.quality ~ video.games*cat.dog,data = clean.data2) %&gt;%
  summary()</code></pre>
<pre><code>##                     Df Sum Sq Mean Sq F value Pr(&gt;F)
## video.games          1    1.3   1.274   0.126  0.724
## cat.dog              1    6.1   6.088   0.604  0.441
## video.games:cat.dog  1    1.3   1.321   0.131  0.719
## Residuals           42  423.1  10.075</code></pre>
<p>Similar to a one-way ANOVA, the two-way ANOVA will tell you whether or not there is a difference, but it will not tell you where that difference is. In order to determine this, you will need to calculate summary statistics (e.g., means for each cell) and conduct follow-up comparisons.</p>
<div id="calculate-summary-statistics" class="section level4">
<h4>Calculate Summary Statistics</h4>
<pre class="r"><code>clean.data2 %&gt;%
  group_by(video.games,cat.dog) %&gt;%
  summarise(
    count = n(),
    mean = mean(sleep.quality,na.rm = TRUE),
    sd = sd(sleep.quality,na.rm = TRUE)
  )</code></pre>
<pre><code>## # A tibble: 4 x 5
## # Groups:   video.games [2]
##   video.games cat.dog count  mean    sd
##   &lt;chr&gt;       &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 No          cat         8  15.6  1.85
## 2 No          dog         9  14.4  2.60
## 3 Yes         cat        18  14.8  3.33
## 4 Yes         dog        11  14.4  3.96</code></pre>
</div>
<div id="multiple-comparisons" class="section level4">
<h4>Multiple Comparisons</h4>
<p>In the ANOVA table above, we do not find a significant interaction between playing video games and being a cat or dog person. However, we will conduct the comparisons below to determine as if there were a significant interaction. To assess the significant interaction, we test whether the difference between video gamers and non-video gamers differs depending on whether they are a cat or dog person.</p>
<pre class="r"><code>t.test(sleep.quality ~ cat.dog,data = filter(clean.data2,video.games == &quot;Yes&quot; &amp; (cat.dog == &quot;cat&quot; | cat.dog == &quot;dog&quot;)))</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  sleep.quality by cat.dog
## t = 0.32892, df = 18.493, p-value = 0.7459
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -2.524679  3.464073
## sample estimates:
## mean in group cat mean in group dog 
##          14.83333          14.36364</code></pre>
<pre class="r"><code>t.test(sleep.quality ~ cat.dog,data = filter(clean.data2,video.games == &quot;No&quot; &amp; (cat.dog == &quot;cat&quot; | cat.dog == &quot;dog&quot;)))</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  sleep.quality by cat.dog
## t = 1.0871, df = 14.362, p-value = 0.2949
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -1.143223  3.504334
## sample estimates:
## mean in group cat mean in group dog 
##          15.62500          14.44444</code></pre>
</div>
</div>
<div id="plot-data-1" class="section level3">
<h3>3. Plot data</h3>
<p>When plotting the data, we want to visualise the relationship between videogamers and sleep quality separated by the moderator - whether participants are a cat or dog person. We can do this by adding a <code>facet_wrap()</code> to our standard violin plot. Here, we only need to specify which variable to separate the plot on.</p>
<pre class="r"><code>ggplot(clean.data2,aes(x = video.games,y = sleep.quality,fill = cat.dog)) +
  geom_violin() +
  stat_summary() +
  facet_wrap(~ cat.dog) +
  theme_classic()</code></pre>
<p><img src="6mod_med2_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
</div>
<div id="mixed-designs-anova" class="section level2">
<h2>Mixed-Designs ANOVA</h2>
<p>A mixed design ANOVA is used when you want to test the interaction between a categorical between-subjects variable, and a categorical within-subjects variable (the “mixed design” part refers to the fact that one IV is between-subjects, while the other is within-subjects). In this example, we will test whether exposure to the Scottish Government’s anti-drinking campaign differs depending on whether people are cat or dog people.</p>
<div id="clean-the-data-for-analysis.-2" class="section level3">
<h3>1. Clean the data for analysis.</h3>
<p>Much like with the paired-samples t-test, before conducting the analysis, you will first need to reshape the data from short to long format. We do this using the <code>gather()</code> function, which we cover in more detail in Workbook 10.</p>
<pre class="r"><code>clean.data3 &lt;- data %&gt;%
  filter(cat.dog != &quot;both&quot;) %&gt;%
  filter(cat.dog != &quot;neither&quot;) %&gt;%
  filter(cat.dog != &quot;&quot;) %&gt;%
  select(student.no,pre.drink,post.drink,cat.dog) %&gt;%
  gather(key = &quot;condition&quot;,value = &quot;response&quot;,pre.drink,post.drink)</code></pre>
</div>
<div id="run-statistical-test-2" class="section level3">
<h3>2. Run statistical test</h3>
<p>Again, we use the <code>aov()</code> function to conduct the mixed design ANOVA. The mixed design ANOVA combines elements from the two-way ANOVA and repeated measures ANOVA. First, we include an interaction term between the two IVs. Second, we need to include in the formula the part that tells the function which variable is within subjects. In order to tell the function that it is within-subjects, however, you will need to specify this in the formula. In the example below, we are predicting <code>response</code> (i.e., number of drinks) based on <code>condition</code> (i.e., before and after seeing the ad). The part of the code that goes <code>+ Error(student.no/condition)</code> tells the <code>aov()</code> function that the variable <code>condition</code> is repeated based on the <code>Subject</code> variable.</p>
<pre class="r"><code>aov(response ~ cat.dog*condition + Error(student.no/condition),data = clean.data3) %&gt;%
  summary()</code></pre>
<pre><code>## 
## Error: student.no
##         Df Sum Sq Mean Sq
## cat.dog  1  21.61   21.61
## 
## Error: student.no:condition
##           Df  Sum Sq Mean Sq
## condition  1 0.01195 0.01195
## 
## Error: Within
##                   Df Sum Sq Mean Sq F value Pr(&gt;F)
## cat.dog            1    176  175.60   2.043  0.157
## condition          1     41   40.91   0.476  0.492
## cat.dog:condition  1      3    2.93   0.034  0.854
## Residuals         86   7393   85.96</code></pre>
</div>
<div id="plot-data-2" class="section level3">
<h3>3. Plot data</h3>
<p>To visualise the data, we again use a violin plot, and use the <code>facet_wrap()</code> function to split the data according to the moderator.</p>
<pre class="r"><code>ggplot(clean.data3,aes(x = condition,y = response,fill = cat.dog)) +
  geom_violin() +
  stat_summary() +
  facet_wrap(~ cat.dog) +
  theme_classic()</code></pre>
<p><img src="6mod_med2_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="exercises-1" class="section level1">
<h1>Exercises</h1>
<p>Now that you’ve completed this week’s workbook, why not give this week’s exercises a go? You can download the interactive exercises by clicking the link below.</p>
<p><a href = "exercises.html">Click here to download this week’s exercises.</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
